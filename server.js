/*! For license information please see server.js.LICENSE.txt */
(()=>{"use strict";var e={721:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.iterator,y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function b(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||y}function h(){}function g(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||y}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},h.prototype=b.prototype;var E=g.prototype=new h;E.constructor=g,m(E,b.prototype),E.isPureReactComponent=!0;var S=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var o,c={},u=null,a=null;if(null!=t)for(o in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(u=""+t.key),t)_.call(t,o)&&!x.hasOwnProperty(o)&&(c[o]=t[o]);var i=arguments.length-2;if(1===i)c.children=n;else if(1<i){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+2];c.children=s}if(e&&e.defaultProps)for(o in i=e.defaultProps)void 0===c[o]&&(c[o]=i[o]);return{$$typeof:r,type:e,key:u,ref:a,props:c,_owner:w.current}}function j(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var k=/\/+/g;function q(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,o,c,u){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var i=!1;if(null===e)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case r:case n:i=!0}}if(i)return u=u(i=e),e=""===c?"."+q(i,0):c,S(u)?(o="",null!=e&&(o=e.replace(k,"$&/")+"/"),R(u,t,o,"",(function(e){return e}))):null!=u&&(j(u)&&(u=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(u,o+(!u.key||i&&i.key===u.key?"":(""+u.key).replace(k,"$&/")+"/")+e)),t.push(u)),1;if(i=0,c=""===c?".":c+":",S(e))for(var s=0;s<e.length;s++){var l=c+q(a=e[s],s);i+=R(a,t,o,l,u)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),s=0;!(a=e.next()).done;)i+=R(a=a.value,t,o,l=c+q(a,s++),u);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function P(e,t,r){if(null==e)return e;var n=[],o=0;return R(e,n,"","",(function(e){return t.call(r,e,o++)})),n}function $(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var C={current:null},T={transition:null},D={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:T,ReactCurrentOwner:w};t.Children={map:P,forEach:function(e,t,r){P(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=o,t.Profiler=u,t.PureComponent=g,t.StrictMode=c,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=m({},e.props),c=e.key,u=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,a=w.current),void 0!==t.key&&(c=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(s in t)_.call(t,s)&&!x.hasOwnProperty(s)&&(o[s]=void 0===t[s]&&void 0!==i?i[s]:t[s])}var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){i=Array(s);for(var l=0;l<s;l++)i[l]=arguments[l+2];o.children=i}return{$$typeof:r,type:e.type,key:c,ref:u,props:o,_owner:a}},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:$}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return C.current.useCallback(e,t)},t.useContext=function(e){return C.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return C.current.useDeferredValue(e)},t.useEffect=function(e,t){return C.current.useEffect(e,t)},t.useId=function(){return C.current.useId()},t.useImperativeHandle=function(e,t,r){return C.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return C.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.current.useMemo(e,t)},t.useReducer=function(e,t,r){return C.current.useReducer(e,t,r)},t.useRef=function(e){return C.current.useRef(e)},t.useState=function(e){return C.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return C.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return C.current.useTransition()},t.version="18.2.0"},741:(e,t,r)=>{e.exports=r(721)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var c=t[n]={exports:{}};return e[n](c,c.exports,r),c.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=require("express");var t=r.n(e);const n=require("cors");var o=r.n(n);const c=require("react");var u=r.n(c);const a=require("react-router-dom/server"),i=require("react-dom/server"),s=require("morgan");var l=r.n(s);const f=require("@babel/runtime/helpers/asyncToGenerator");var p=r.n(f);const d=require("@babel/runtime/helpers/slicedToArray");var y=r.n(d);const m=require("@babel/runtime/regenerator");var v=r.n(m);const b=(0,c.createContext)(),h=require("@babel/runtime/helpers/defineProperty");var g=r.n(h);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){g()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const _=function(e,t){var r=t.payload;return"GET_PRODUCTS"===t.type?S(S({},e),{},{products:r}):e},w=require("axios");var x=r.n(w);const O=function(e){var t=e.children,r=(0,c.useReducer)(_,{products:[]}),n=y()(r,2),o=n[0],a=n[1],i=(0,c.useState)("All"),s=y()(i,2),l=s[0],f=s[1],d=(0,c.useState)(""),m=y()(d,2),h=m[0],g=m[1],E=(0,c.useState)(""),S=y()(E,2),w=S[0],O=S[1],j=(0,c.useState)(1),k=y()(j,2),q=k[0],R=k[1],P=(0,c.useState)(""),$=y()(P,2),C=$[0],T=$[1];(0,c.useEffect)((function(){D(l,h,w,q,C)}),[l,h,w,q,C]);var D=function(){var e=p()(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()("http://localhost:3006/api/products?category=".concat(l,"&brand=").concat(h,"&title=").concat(w,"&page=").concat(q,"&sort=").concat(C)).then((function(e){a({type:"GET_PRODUCTS",payload:e.data})})).catch((function(e){console.log(e)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u().createElement(b.Provider,{value:{products:o.products,setCategory:f,setBrand:g,setTitle:O,setPage:R,setSort:T}},t)};var j=r(741);const k=function(e){var t=e.title,r=e.image,n=e.category,o=e.brand;return j.createElement("div",{class:"card mb-3 text-center h-100"},j.createElement("div",{class:"card-body"},j.createElement("img",{src:r,alt:t,class:"card-image-top",width:"80",height:"100"}),j.createElement("div",null,j.createElement("h5",{class:"card-title"},t),j.createElement("p",{class:"card-text"},"category: ",n),j.createElement("p",{class:"card-text"},"brand: ",o))),j.createElement("div",{class:"d-grid gap-2 col-6 mx-auto mb-3"},j.createElement("button",{type:"buton",class:"btn btn-outline-success"},"Comprar")))},q=function(){var e=(0,c.useContext)(b).products.products;return u().createElement("div",{class:"container"},u().createElement("div",{class:"row"},u().createElement("div",{class:"row row-cols-1 row-cols-md-3 g-4"},e&&e.map((function(e){return u().createElement("div",{key:e._id,class:"col"},u().createElement(k,{title:e.title,category:e.category,brand:e.brand,image:e.image}))})))))},R=function(){return u().createElement("main",null,u().createElement(O,null,u().createElement("section",null,u().createElement("div",null,u().createElement(q,null)))))},P=require("react-router-dom"),$=function(e){return e.data,u().createElement("div",null,u().createElement(P.Routes,null,u().createElement(P.Route,{path:"/",element:u().createElement(R,null)})))};require("serialize-javascript"),(0,require("dotenv").config)();var C=process.env.PORT,T=process.env.MONGO_URL;const D=require("@babel/runtime/helpers/toConsumableArray");var A=r.n(D);const I=require("mongoose");var M=r.n(I),U=new I.Schema({title:{type:String,trim:!0,required:!0},image:{type:String,trim:!0,required:!0},category:{type:String,trim:!0,required:!0},brand:{type:String,trim:!0,required:!0},stock:{type:Number,trim:!0,required:!0}});const B=(0,I.model)("Products",U);var F=function(){var e=p()(v().mark((function e(t,r){var n,o,c,u,a,i,s,l,f,p,d,y,m;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=parseInt(t.query.page)-1||0,o=parseInt(t.query.limit)||10,c=t.query.title||"",u=t.query.category||"All",a=t.query.brand||"",i=t.query.sort||"",e.next=9,B.find();case 9:return s=e.sent,l=s.map((function(e){return e.category})),f=l.filter((function(e,t){return l.indexOf(e)===t})),u="All"===u?A()(l):t.query.category.split(",").toString(),p={},"asc"===i&&(p.price=1),"desc"===i&&(p.price=-1),e.next=18,B.find();case 18:return e.sent,e.next=21,B.find({title:{$regex:c,$options:"i"},brand:{$regex:a,$options:"i"}}).where("category").in(A()(u)).sort(p).skip(n*o).limit(o);case 21:return d=e.sent,e.next=24,B.countDocuments({title:{$regex:c,$options:"i"},category:{$in:A()(u)}});case 24:y=e.sent,m={total:y,page:n+1,limit:o,categories:f,products:d},r.status(200).json(m),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),r.status(500).json({message:e.t0.message});case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t,r){return e.apply(this,arguments)}}(),G=(0,e.Router)();G.get("/products",F);const L=G;var V=t()();V.set("port",C),V.use(l()("dev")),V.use(o()()),V.use(t().static("public")),V.get("/",(function(e,t,r){if("/api/*"!==e.url){var n=(0,i.renderToString)(u().createElement(a.StaticRouter,{location:e.url,context:{}},u().createElement($,null)));t.send('\n\t\t<!DOCTYPE html>\n\t\t<html>\n\t\t    <head>\n\t\t    \t<meta charset="utf-8">\n    \t\t\t<meta name="viewport" content="width=device-width, initial-scale=1">\n\t\t       \t<title>Fast Buy</title>\n\t\t       \t<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">\n\t\t    </head>\n\t\t    <body>\n\t\t       \t<script src="/bundle.js" defer><\/script>\n\t\t    \t<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"><\/script>\n\t\t    \t<div id="root" >'.concat(n,"</div>\n\t\t    </body>\n\t\t</html>\n\t\t"))}else r()})),V.use("/api",L);const N=V;!function(){var e=p()(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M().set("strictQuery",!1);case 2:return e.next=4,M().connect(T);case 4:t=e.sent,console.log("Using Mongo DB version ".concat(t.version," in the port ").concat(t.connection.port));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),N.listen(N.get("port"),(function(){console.log("Server is listening on port: ".concat(N.get("port")))}))})()})();